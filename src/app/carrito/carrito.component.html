<div class="container">
  <h2 class="mt-3"><i class="fa-solid fa-cart-shopping"></i> Carrito de apartados</h2>
  <div class="row">
    <div class="col col-12 col-md-12 col-lg-8 col-xl-9">
      <div class="table-responsive" *ngIf="detProd.length != 0 else noCarrito">
        <table class="table table-striped">
          <thead>
            <tr>
              <th class="text-center">Imagen</th>
              <th class="text-center">Producto</th>
              <th class="text-center">Existencias</th>
              <th class="text-center">Cantidad</th>
              <th class="text-center">Precio</th>
              <th class="text-center">Total</th>
              <th class="text-center">Eliminar</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of detProd">
              <td class="text-center">
                <img
                  src="{{p.imagen}}"
                  alt=""
                  class="img-product"
                  style="width: 100px; height: 100px; object-fit: cover;"
                />
              </td>
              <td class="text-center">{{ p.nombre }}</td>
              <td class="text-center">{{ p.cantidad }}</td>
              <td class="text-center">
                  <button
                    class="cart-qty-plus"
                    type="button"
                    value="+"
                    (click)="add(p.id)"
                  >
                    +
                  </button>
                  <input

                  type="number"
                  name="qty"
                  class="form-control"
                  style="text-align: center; width: 100%;"
                  [max]="p.cantidad"
                  disabled
                  min="1"
                  [value]="p.cantidadAgregada"
                />
                  <button
                    class="cart-qty-minus"
                    style="display: inline;"
                    type="button"
                    value="+"
                    (click)="remove(p.id)"
                  >
                    -
                  </button>
              </td>
              <td class="text-center">
                <input
                  type="text"
                  id="precio"
                  [value]="'$'+p.precio"
                  class="price form-control w-100"
                  disabled
                />
              </td>
              <td class="text-center">
                $
                <span id="amount" class="amount">{{p.subtotal}}</span>
              </td>
              <td class="text-center">
                <button class="btn" (click)="eliminarProd(p.id)"><i class="fa-solid fa-trash"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="col col-12 col-md-12 col-lg-4 col-xl-3">
      <div class="card text-center mb-3" style="padding: 10px">
        <div class="card-body">
          <h2>Resumen de apartado</h2>
          <hr />
          <div *ngIf="detProd.length!=0 else noCarrito">
            <ul class="list-group list-group-flush">
              <li *ngFor="let p of detProd" class="list-group-item">
                {{ p.cantidadAgregada }} - {{ p.nombre }}
              </li>
            </ul>
          </div>
          <hr />
          <h3 class="text-center">Total:  ${{totalGeneral}}</h3>
          <button class="btn btn-primary" (click)="apartar()" [disabled]="detProd.length==0" >Apartar</button>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noCarrito>
    <div class="h1 text-center my-3">
      Sin productos
    </div>
  </ng-template>
  <div class="button-izq">
    <button class="btn btn-primary p-3" type="submit" routerLink="/menu_comprador">
      <i class="fa-solid fa-arrow-left"></i> Continuar comprando
    </button>
  </div>
</div>
